<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ product[1] }}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
        .product-page { display: flex; gap: 40px; max-width: 1000px; margin: 50px auto; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1); }
        .product-image img { max-width: 350px; border-radius: 8px; }
        .product-details { flex-grow: 1; }
        .product-title { font-size: 24px; font-weight: bold; }
        .price { color: #B12704; font-size: 28px; font-weight: bold; margin: 10px 0; }
        .offers { background-color: #f0f2f2; padding: 10px; border: 1px solid #ddd; border-radius: 5px; margin: 10px 0; }
        .stock-status { color: #008000; font-weight: bold; }
        .action-buttons button { background-color: #ff9900; color: white; border: none; padding: 10px 20px; cursor: pointer; border-radius: 5px; font-size: 18px; margin-right: 30px; margin-top: 15px; justify-content: center; }
        .buy-button { background-color: #a66863; } /* Red Buy button */
        .rating { margin: 10px 0; }
        .feedback-textarea { width: 100%; height: 80px; resize: none; margin: 10px 0; }
        .back-button { position: absolute; top: 15px; left: 15px; background-color: #2ecc71; color: white; padding: 10px 15px; text-decoration: none; border-radius: 5px; font-size: 16px; font-weight: bold; transition: background-color 0.3s ease, transform 0.2s ease; }
        .back-button:hover { background-color: #27ae60; transform: scale(1.05); }
        .rating { margin: 10px 0; }
        .star { font-size: 30px; }
        .filled { color: gold; }
        .empty { color: lightgray; }
    </style>
</head>
<body>
    <a href="/stationary" class="back-button">Back to Stationary</a>
    <div class="product-page">
        <div class="product-image">
            <img src="{{ url_for('static', filename=product[5]) }}" alt="Product Image">

             <!-- ðŸ›’ Buttons inside a flex container -->
<div class="action-buttons">
    <!-- Add to Cart Form -->
    <form action="{{ url_for('add_to_cart', product_id=product[0]) }}" method="post">
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" name="quantity" value="1" min="1" required>
        <button type="submit">Add to Cart</button>
    </form>

    <!-- Buy Now Form -->
    <form action="{{ url_for('buy_items') }}" method="post">
        <input type="hidden" name="product_id" value="{{ product[0] }}">
        <input type="number" name="quantity" value="1" min="1" required>  
        <button type="submit" class="buy-button">Buy</button>
    </form>
</div>

        </div>

        
        <div class="product-details">
            <div class="product-title">{{ product[1] }}</div>
            <p><strong>Category:</strong> {{ product[2] }}</p>
            <div class="price">â‚¹{{ product[3] }}</div>
            <p class="stock-status">{{ 'In stock' if product[4] > 0 else 'Out of stock' }}</p>
            <p><strong>Description:</strong></p>
                <ul>
                    {% for line in product[6].split('|') %}
                        <li>{{ line.strip() }}</li>
                    {% endfor %}
                </ul>

            <!-- â­ Dynamic Star Rating Display -->
            <div class="rating">
                {% set rating = product[7] | int %}  <!-- Assuming 'rating' is at index 7 -->
                {% for i in range(1, 6) %}
                    {% if rating >= i %}
                        <span class="star filled">â˜…</span>
                    {% else %}
                        <span class="star empty">â˜…</span>
                    {% endif %}
                {% endfor %}
            </div>
            <!-- ðŸ“ Rate the Product Heading -->
            <p class="rate-product">Rate the product:</p>

            <!-- â­ User Rating Form -->
            <form action="{{ url_for('submit_rating', product_id=product[0]) }}" method="post" class="rating-form">
                <div class="rating">
                    {% for i in range(1, 6) %}
                        <input type="radio" id="star{{ i }}" name="user_rating" value="{{ i }}" required hidden>
                        <label for="star{{ i }}" class="star empty" onclick='highlightStars({{ i }})'>â˜…</label>
                    {% endfor %}
                </div>
                <button type="submit">Submit Rating</button>
            </form>

            

           


        </div>
    </div>
    <script>
        function highlightStars(rating) {
            let stars = document.querySelectorAll(".rating-form .star");
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add("filled");
                    star.classList.remove("empty");
                } else {
                    star.classList.add("empty");
                    star.classList.remove("filled");
                }
            });
        }
    </script>
    
</body>
</html>
